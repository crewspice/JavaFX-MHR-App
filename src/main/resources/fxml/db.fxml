<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<AnchorPane fx:id="anchorPane" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.MaxHighReach.DBController">

    <!-- Main Layout: HBox with TableView on the left and VBox with buttons on the right -->
    <HBox AnchorPane.leftAnchor="20" AnchorPane.rightAnchor="20" AnchorPane.topAnchor="20" AnchorPane.bottomAnchor="50" spacing="10">

        <!-- Table View (on the left) -->
        <VBox spacing="5" alignment="TOP_CENTER" HBox.hgrow="ALWAYS">
            <ComboBox fx:id="filterComboBox" onAction="#handleFilterSelection">
                <items>
                    <FXCollections fx:factory="observableArrayList">
                        <String fx:value="All Deliveries"/>
                        <String fx:value="Today's Deliveries"/>
                        <String fx:value="Yesterday's Deliveries"/>
                        <String fx:value="Custom Date Range"/>
                    </FXCollections>
                </items>
            </ComboBox>

            <Label fx:id="loadingLabel" text="Loading..." alignment="TOP_LEFT" visible="false"/> <!-- Loading label -->

            <AnchorPane>
                <TableView fx:id="dbTableView" prefHeight="486" prefWidth="190" translateY="-25" translateX="-8">
                    <columns>
                        <TableColumn fx:id="idColumn" text="ID" prefWidth="13"/>
                        <TableColumn fx:id="nameColumn" text="Name" prefWidth="33"/>
                        <TableColumn fx:id="orderDateColumn" text="Date" prefWidth="36"/>
                        <TableColumn fx:id="amountColumn" text="Amt." prefWidth="39"/>
                        <TableColumn fx:id="driverColumn" text="Driver" prefWidth="43"/>
                        <TableColumn fx:id="statusColumn" text="Status" prefWidth="25"/>
                    </columns>
                </TableView>
            </AnchorPane>

            <!-- Refresh Button below the table -->
            <Button fx:id="refreshButton" text="Refresh Data" onAction="#handleRefresh" translateY="-25"/>
        </VBox>

        <!-- Buttons (on the right in VBox) -->
        <VBox spacing="5" alignment="TOP_LEFT" prefWidth="50">

            <!-- Edit Driver Button with Icon -->
            <Button fx:id="editDriverButton" onAction="#handleAssignDrivers" styleClass="edit-driver-button">
                <graphic>
                    <ImageView fitWidth="26" fitHeight="26">
                        <Image url="@/images/driver-icon.png"/>
                    </ImageView>
                </graphic>
            </Button>

            <!-- Dropping Off Button with Icon -->
            <Button fx:id="droppingOffButton" onAction="#handleDroppingOff">
                <graphic>
                    <ImageView fitWidth="46" fitHeight="26">
                        <Image url="@/images/dropping-off.png"/>
                    </ImageView>
                </graphic>
            </Button>

            <!-- Picking Up Button with Icon -->
            <Button fx:id="pickingUpButton" onAction="#handlePickingUp">
                <graphic>
                    <ImageView fitWidth="46" fitHeight="26">
                        <Image url="@/images/picking-up.png"/>
                    </ImageView>
                </graphic>
            </Button>

        </VBox>
    </HBox>

    <!-- Back Button (located at the top) -->
    <Button fx:id="backButton" text="Back" layoutX="270" layoutY="5" onAction="#handleBack"/>

</AnchorPane>
